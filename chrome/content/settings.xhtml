<?xml version="1.0" encoding="UTF-8"?>

<?xml-stylesheet href="chrome://smarttemplate4/content/skin/settings.css" type="text/css" title="SmartTemplateSettings" ?>
<?xml-stylesheet href="chrome://global/skin/" type="text/css"?>
<!--  tb 59 -->
<?xml-stylesheet href="chrome://messenger/skin/preferences/preferences.css" type="text/css" ?>
<!--  tb 68, for groupbox -->
<?xml-stylesheet type="text/css" href="chrome://messenger/skin/messenger.css" ?>
<?xml-stylesheet href="chrome://smarttemplate4/content/skin/common/license.css" type="text/css"?>

<dialog id="smartTemplate_prefDialog"
				xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
				xmlns:html="http://www.w3.org/1999/xhtml"
				title="__MSG_pref_dialog.title__ (__MSG_localename.label__)"
				buttons="extra2,accept"
				defaultButton=""
				windowtype="addon:SmartTemplate4">


	<prefpane id="smartTemplatePane" orient="vertical" flex="1">
		<spacer id="topOptions" />
		
<!-- fills full width of window -->
<hbox id="optionsContainer" flex="1">

	<vbox id="decksContainer" flex="1">

		<!-- ######## Creating Identity Dropdown Box ######## -->
		<hbox align="center" id="identityToolBar">
			<label value="__MSG_pref_server_desc__:" 
          id="identityLabel"
          class="contextConfig"
          oncontextmenu="SmartTemplate4.Util.showAboutConfig(this, 'extensions.smartTemplate4.identities');"
          />
			<menulist id="msgIdentity"
			          class="identity-menulist"
			          label="__MSG_pref_server_def__"
			          flex="1"
			          oncommand="SmartTemplate4.Settings.selectIdentity(this.value);"
                tabindex="0">
				<menupopup id="msgIdentityPopup">
					<menuitem class="identity-popup-item" label="__MSG_pref_server_def__" value="common"/>
				</menupopup>
			</menulist>
			<toolbar id="templateTools" 
			         mode="icons" 
							 customizable="false"
               >
        <span class="navigateable">
        <toolbarbutton id="helpTemplates"
            class="toolbarbutton-1 chromeclass-toolbar-additional"
            oncommand="SmartTemplate4.Util.showStationeryHelpPage('templateFiles');" 
            label=""
            tooltiptext="__MSG_tip.fileTemplates__"
            />
				<toolbarbutton id="btnSaveTemplate"
              class="toolbarbutton-1 chromeclass-toolbar-additional"
              tooltiptext="__MSG_btnSaveTemplate.tooltip__"
              alt="__MSG_btnSaveTemplate.tooltip__"
              oncommand="SmartTemplate4.Settings.store();"/>
				<toolbarbutton id="btnLoadTemplate"
              class="toolbarbutton-1 chromeclass-toolbar-additional"
              tooltiptext="__MSG_btnLoadTemplate.tooltip__"
              alt="__MSG_btnLoadTemplate.tooltip__"
              oncommand="SmartTemplate4.Settings.load();"/>
				<toolbarbutton id="btnYouTube"
              class="toolbarbutton-1 chromeclass-toolbar-additional"
              tooltiptext="__MSG_btnYouTube.tooltip__"
              alt="__MSG_btnYouTube.tooltip__"
              oncommand="SmartTemplate4.Util.showYouTubePage();"/>
        <toolbarbutton id="btnAdvanced"
              class="toolbarbutton-1 chromeclass-toolbar-additional"
              tooltiptext="__MSG_advanced.label__"
              alt="__MSG_advanced.label__"
              oncommand="SmartTemplate4.Settings.openAdvanced();"/>
        <toolbarbutton id="btnCloseAdvanced"
              class="toolbarbutton-1 chromeclass-toolbar-additional"
              tooltiptext="__MSG_close.label__"
              oncommand="SmartTemplate4.Settings.closeAdvanced();"
              alt="__MSG_close.label__"
              hidden="true"/>
        </span>
      </toolbar>

		</hbox>

		<vbox id="decksWrapper" flex="1">
			<deck id="account_deckA" flex="1" class="templateDeck">

				<vbox id="deckA.per_account" flex="1"> <!-- cloned element -->
					<!-- ######## Template Preferences ######## -->

					<preferences id="templates">
						<preference name="extensions.smartTemplate4.common.def"       type="bool" instantApply="true"/>
						<preference name="extensions.smartTemplate4.common.new"       type="bool" instantApply="true"/>
						<preference name="extensions.smartTemplate4.common.rsp"       type="bool" instantApply="true"/>
						<preference name="extensions.smartTemplate4.common.fwd"       type="bool" instantApply="true"/>
						<preference name="extensions.smartTemplate4.common.newmsg"    type="unichar" instantApply="true"/>
						<preference name="extensions.smartTemplate4.common.rspmsg"    type="unichar" instantApply="true"/>
						<preference name="extensions.smartTemplate4.common.fwdmsg"    type="unichar" instantApply="true"/>
						<preference name="extensions.smartTemplate4.common.newhtml"   type="bool" instantApply="true"/>
						<preference name="extensions.smartTemplate4.common.rsphtml"   type="bool" instantApply="true"/>
						<preference name="extensions.smartTemplate4.common.fwdhtml"   type="bool" instantApply="true"/>
						<preference name="extensions.smartTemplate4.common.newnbr"    type="bool" instantApply="true"/>
						<preference name="extensions.smartTemplate4.common.rspnbr"    type="bool" instantApply="true"/>
						<preference name="extensions.smartTemplate4.common.fwdnbr"    type="bool" instantApply="true"/>
						<preference name="extensions.smartTemplate4.common.rspheader" type="unichar" instantApply="true"/>
						<preference name="extensions.smartTemplate4.common.fwdheader" type="unichar" instantApply="true"/>
						<preference name="extensions.smartTemplate4.common.rsphead"   type="bool" instantApply="true"/>
						<preference name="extensions.smartTemplate4.common.fwdhead"   type="bool" instantApply="true"/>
					</preferences>

					<hbox align="center">
						<checkbox id="use_default"
											label="__MSG_pref_def.label__"
											preference="extensions.smartTemplate4.common.def"
											oncommand="SmartTemplate4.Settings.showCommonPlaceholder(this.checked);"/>
						<spacer flex="1" />
					</hbox>

					<spacer height="5px" />

					<!-- ######## Default DeckB & Tab Creating ######## -->
					<deck id="default.deckB" flex="1" orient="vertical">

						<tabbox id="deckB.nodef" flex="1" orient="vertical" selectedIndex="0" >

							<tabs id="deckB.nodef.tabs"  class="actionTabs">
								<tab id="newTab"     label="__MSG_pref_new.tab__" class="NewTab"/>
								<tab id="respondTab" label="__MSG_pref_rsp.tab__" class="RespondTab" />
								<tab id="forwardTab" label="__MSG_pref_fwd.tab__" class="ForwardTab" />
							</tabs>

							<!-- ######## Content New Message [Write] Tab ######## -->
							<tabpanels flex="1" orient="vertical">
								<tabpanel class="newGroup">
									<groupbox flex="1" orient="vertical" class="transparent">
										<hbox class="groupbox-title"><label class="header">__MSG_pref_newmsg.cap__</label></hbox>
										<vbox flex="1" class="vfield">
											<hbox>
												<checkbox id="new"
												          label="__MSG_pref_new.label__"
												          preference="extensions.smartTemplate4.common.new"
												          oncommand="SmartTemplate4.Settings.disableWithCheckbox(this);"/>
												<spacer flex="1" />
											</hbox>
											<label value="__MSG_pref_templateBox.label__"/>
											<vbox class="indent" flex="1">
												<html:textarea 
													id="newmsg"
													flex="1"
													class="templateBox templateWrite"
													multiline="true"
													tooltiptext="__MSG_pref_template_tip__"
													ondrop="SmartTemplate4.Settings.textDropped(event);"
													preference="extensions.smartTemplate4.common.newmsg"
													preference-editable="true"/>
												<checkbox id="newhtml"
												          label="__MSG_pref_html.label__"
												          tooltiptext="__MSG_pref_html.cap__"
												          preference="extensions.smartTemplate4.common.newhtml"
												          oncommand="SmartTemplate4.Settings.disableWithCheckbox(this);"/>
												<checkbox id="newnbr"
												          class="indent"
												          label="__MSG_pref_rep_br.label__"
												          tooltiptext="__MSG_pref_rep_br.cap__"
												          preference="extensions.smartTemplate4.common.newnbr"/>
											</vbox>
										</vbox>
									</groupbox>
								</tabpanel>

								<!-- ######## Content [Reply] Tab ######## -->
								<tabpanel class="replyGroup">
									<groupbox flex="1" class="transparent">
										<hbox class="groupbox-title"><label class="header">__MSG_pref_rspmsg.cap__</label></hbox>
										<vbox flex="1" class="vfield">
											<hbox>
												<checkbox id="rsp"
																	label="__MSG_pref_rsp.label__"
																	preference="extensions.smartTemplate4.common.rsp"
																	oncommand="SmartTemplate4.Settings.disableWithCheckbox(this);"/>
												<spacer flex="1" />
											</hbox>
											<label value="__MSG_pref_quoteHeaderBox.label__"/>
											<vbox class="indent headers" flex="1">
												<vbox class="pasteFocus headers" flex="1">
													<html:textarea 
														id="rspheader"
														class="templateBox quote"
														multiline="true"
														flex="1"
														tooltiptext="__MSG_pref_quoteHeaderBox_tip__"
														preference="extensions.smartTemplate4.common.rspheader"
														preference-editable="true"
														ondrop="SmartTemplate4.Settings.textDropped(event);"
														onfocus="SmartTemplate4.Settings.pasteFocus(this);"/>
												</vbox>
												<checkbox id="rsphead"
																	label="__MSG_pref_rsphead.label__"
																	tooltiptext="__MSG_pref_quotehead_tip__"
																	preference="extensions.smartTemplate4.common.rsphead"/>
											</vbox>
											<label value="__MSG_pref_templateBox.label__"/>
											<vbox class="indent template" flex="1">
												<vbox class="pasteFocus" flex="2">
													<html:textarea 
														id="rspmsg"
														class="templateBox template"
														multiline="true"
														flex="1"
														tooltiptext="__MSG_pref_templateBox_tip__"
														preference="extensions.smartTemplate4.common.rspmsg"
														preference-editable="true"
														ondrop="SmartTemplate4.Settings.textDropped(event);"
														onfocus="SmartTemplate4.Settings.pasteFocus(this);"/>
												</vbox>
											</vbox>
											<checkbox id="rsphtml"
																label="__MSG_pref_html.label__"
																tooltiptext="__MSG_pref_html.cap__"
																preference="extensions.smartTemplate4.common.rsphtml"
																oncommand="SmartTemplate4.Settings.disableWithCheckbox(this);"/>
											<checkbox id="rspnbr"
																class="indent"
																label="__MSG_pref_rep_br.label__"
																tooltiptext="__MSG_pref_rep_br.cap__"
																preference="extensions.smartTemplate4.common.rspnbr"/>
										</vbox>
									</groupbox>
								</tabpanel>

								<!-- ######## Content [Forward] Message Tab ######## -->
								<tabpanel class="forwardGroup">
									<groupbox  flex="1" class="transparent">
										<hbox class="groupbox-title"><label class="header">__MSG_pref_fwdmsg.cap__</label></hbox>
										<vbox flex="1" class="vfield">
											<hbox>
												<checkbox id="fwd"
																	label="__MSG_pref_fwd.label__"
																	preference="extensions.smartTemplate4.common.fwd"
																	oncommand="SmartTemplate4.Settings.disableWithCheckbox(this);"/>
											</hbox>
											<label value="__MSG_pref_quoteHeaderBox.label__"/>
											<vbox class="indent headers" flex="1">
												<vbox class="pasteFocus" flex="1">
													<html:textarea 
														id="fwdheader"
														class="templateBox quote"
														multiline="true"
														flex="1"
														tooltiptext="__MSG_pref_quoteHeaderBox_tip__"
														preference="extensions.smartTemplate4.common.fwdheader"
														preference-editable="true"
														ondrop="SmartTemplate4.Settings.textDropped(event);"
														onfocus="SmartTemplate4.Settings.pasteFocus(this);"/>
												</vbox>
												<checkbox id="fwdhead"
																	label="__MSG_pref_fwdhead.label__"
																	tooltiptext="__MSG_pref_quotehead_tip__"
																	preference="extensions.smartTemplate4.common.fwdhead"/>
											</vbox>
											<label value="__MSG_pref_templateBox.label__"/>
											<vbox class="indent template" flex="1">
												<vbox class="pasteFocus" flex="2">
																	 <!-- rows="5" -->
													<html:textarea id="fwdmsg"
														class="templateBox template"
														multiline="true"
														flex="1"
														tooltiptext="__MSG_pref_templateBox_tip__"
														preference="extensions.smartTemplate4.common.fwdmsg"
														preference-editable="true"
														ondrop="SmartTemplate4.Settings.textDropped(event);"
														onfocus="SmartTemplate4.Settings.pasteFocus(this);"/>
													</vbox>
											</vbox>
											<checkbox id="fwdhtml"
																label="__MSG_pref_html.label__"
																tooltiptext="__MSG_pref_html.cap__"
																preference="extensions.smartTemplate4.common.fwdhtml"
																oncommand="SmartTemplate4.Settings.disableWithCheckbox(this);"/>
											<checkbox id="fwdnbr"
																class="indent"
																label="__MSG_pref_rep_br.label__"
																tooltiptext="__MSG_pref_rep_br.cap__"
																preference="extensions.smartTemplate4.common.fwdnbr"/>
										</vbox>
									</groupbox>
								</tabpanel>
							</tabpanels>
						</tabbox>

						<!-- ######## this is hint should be shown instead of the decks when 'Use Common' is active. ######## -->
						<vbox id="deckB.usedef">
							<description>__MSG_pref_def.cap__</description>
						</vbox>
						
					</deck>
					
					
				</vbox>
				
				<!-- ######## File Templates (replaces Stationery) ######## -->
				<vbox id="fileTemplatesBox">
					<tabbox id="fileTemplatesTabs" 
					        flex="1"
									onchange="SmartTemplate4.Settings.selectFileCase(this, event);"
					>
						<tabs class="actionTabs">
							<tab id="file.newTab"      label="__MSG_pref_new.tab__" class="NewTab"/>
							<tab id="file.respondTab"  label="__MSG_pref_rsp.tab__" class="RespondTab" />
							<tab id="file.forwardTab"  label="__MSG_pref_fwd.tab__" class="ForwardTab" />
              <tab id="file.snippetsTab" label="Smart Snippets" class="SnippetsTab" />
						</tabs>
						
						<tabpanels flex="1" 
						           orient="vertical"
											 onselect="SmartTemplate4.Settings.selectFileCase(this, event);"
											 >
							<tabpanel class="newGroup fileTemplatePanel" id="new-fileTemplates">
								<groupbox flex="1" orient="vertical" class="transparent">
									<hbox class="groupbox-title"><label class="header">__MSG_pref_newmsg.cap__</label></hbox>
									<vbox flex="1" class="vfield">
										<label value="__MSG_fileTemplates.title__" 
										       tooltiptext="__MSG_fileTemplates.new.tooltip__" 
													 />
										<richlistbox 
												id="templateList.new" 
												flex="1"
												seltype="single"
												onselect="SmartTemplate4.fileTemplates.onSelect(this);"
												> <!-- note selTyope is camelCase in JS -->
										</richlistbox>
										<!-- we will move this around to the active tab -->
										<vbox id="fileControls">
											<hbox id="fileToolbarPanel">
												<toolbar id="fileTemplateToolbar"
																 class="templateList"
																 mode="full"
																 customizable="false" >
													<toolbarbutton
															id="btnAdd"
															class="toolbarbutton-1 chromeclass-toolbar-additional" 
															label="__MSG_fileTemplates.add__"
															oncommand="SmartTemplate4.fileTemplates.update(true);" />
													<toolbarbutton
															id="btnUpdate"
															class="toolbarbutton-1 chromeclass-toolbar-additional" 
															label="__MSG_fileTemplates.update__"
															oncommand="SmartTemplate4.fileTemplates.update(false);" />
													<toolbarbutton
															id="btnRemove"
															class="toolbarbutton-1 chromeclass-toolbar-additional" 
															label="__MSG_fileTemplates.remove__"
															oncommand="SmartTemplate4.fileTemplates.remove();" />
													<toolbarseparator />
													<toolbarbutton
															id="btnUp"
															class="toolbarbutton-1 chromeclass-toolbar-additional" 
															label="__MSG_fileTemplates.up__"
															oncommand="SmartTemplate4.fileTemplates.up();" />
													<toolbarbutton
															id="btnDown"
															class="toolbarbutton-1 chromeclass-toolbar-additional" 
															label="__MSG_fileTemplates.down__"
															oncommand="SmartTemplate4.fileTemplates.down();" />
													<toolbarbutton
														id="btnEdit"
														class="toolbarbutton-1 chromeclass-toolbar-additional" 
														label="__MSG_fileTemplates.edit__"
														oncommand="SmartTemplate4.fileTemplates.edit();" />															
													<spacer flex="1" />
												</toolbar>						
											</hbox>
                      <div id="fileSettings" >
                        <div>
                          <div class="settingsRow">
                            <label>__MSG_fileTemplates.file.path__</label>
                            <html:input
                                  type="text"
                                  id="txtTemplatePath" 
                                  />
                            <toolbarbutton 
                                    id="btnPickTemplate" 
                                    tooltiptext="__MSG_fileTemplates.file.open__" 
                                    oncommand="SmartTemplate4.fileTemplates.pickFileFromSettings();"
                                    />
                          </div>
                        </div>
                        <div>
                          <div class="settingsRow">
                            <label>__MSG_fileTemplates.file.title__</label>
                            <html:input
                              type="text"
                              id="txtTemplateTitle" 
                              title="__MSG_fileTemplates.file.title.tooltip__"
                              onblur="SmartTemplate4.fileTemplates.onEditLabel(this);"
                              onfocus="SmartTemplate4.fileTemplates.updateInputGlobal(this);"
                              />
                            <label>__MSG_template.category__:</label>
                            <html:input
                              type="text"
                              id="txtTemplateCategory"
                              title="__MSG_template.category.tooltip__"
                              onblur="SmartTemplate4.fileTemplates.onEditLabel();"
                              onfocus="SmartTemplate4.fileTemplates.updateInputGlobal(this);"
                              />
                            <toolbarbutton id="helpSnippets"
                              oncommand="SmartTemplate4.Util.showStationeryHelpPage('snippets');" 
                              label=""
                              tooltiptext="__MSG_template.category.tooltip__"
                              />
                          </div>
                        </div>
                      </div>
											<spacer flex="1" />
										</vbox>
									</vbox>
								</groupbox>
							</tabpanel>

							<!-- ######## Content [Reply] Tab ######## -->
							<tabpanel class="replyGroup fileTemplatePanel" id="rsp-fileTemplates">
								<groupbox flex="1" class="transparent">
									<hbox class="groupbox-title"><label class="header">__MSG_pref_rspmsg.cap__</label></hbox>
									<vbox flex="1" class="vfield">
										<label value="__MSG_fileTemplates.title__" 
										       tooltiptext="__MSG_fileTemplates.rsp.tooltip__" 
													 />										
										<richlistbox 
											id="templateList.rsp" 
											flex="1"
										  onselect="SmartTemplate4.fileTemplates.onSelect(this);">
										</richlistbox>
									</vbox>
								</groupbox>
							</tabpanel>

							<!-- ######## Content [Forward] File Tab ######## -->
							<tabpanel class="forwardGroup fileTemplatePanel" id="fwd-fileTemplates">
								<groupbox  flex="1" class="transparent">
									<hbox class="groupbox-title"><label class="header">__MSG_pref_fwdmsg.cap__</label></hbox>
									<vbox flex="1" class="vfield">
										<label value="__MSG_fileTemplates.title__" 
										       tooltiptext="__MSG_fileTemplates.fwd.tooltip__" 
													 />
										<richlistbox 
											id="templateList.fwd" 
											flex="1"
											onselect="SmartTemplate4.fileTemplates.onSelect(this);">
										</richlistbox>
									</vbox>									
								</groupbox>
							</tabpanel>
              
							<!-- ######## Content [Snippets] File Tab ######## -->
							<tabpanel class="snippetsGroup fileTemplatePanel" id="snippets-fileTemplates">
								<groupbox  flex="1" class="transparent">
									<hbox class="groupbox-title"><label class="header">__MSG_snippets.head__</label></hbox>
									<vbox flex="1" class="vfield">
										<label value="__MSG_snippets.label__" />
										<richlistbox 
											id="templateList.snippets" 
											flex="1"
											onselect="SmartTemplate4.fileTemplates.onSelect(this);">
										</richlistbox>
									</vbox>									
								</groupbox>
							</tabpanel>
                            
						</tabpanels>
						
						
					</tabbox>
				</vbox>
			
			
			
			</deck>

		</vbox>

	</vbox>

	<!-- ######## advancedContainer and Iframe ######## -->
	<vbox id="advancedContainer" flex="1" hidden="true">
	
		<preferences id="globals">
			<preference name="extensions.smartTemplate4.debug" type="bool" instantApply="true"/>
			<preference name="extensions.smartTemplate4.hideExamples" type="bool" instantApply="true"/>
			<preference name="extensions.smartTemplate4.removeSigOnIdChangeAfterEdits" type="bool" instantApply="true"/>
			<preference name="extensions.smartTemplate4.parseSignature" type="bool" instantApply="true"/>
			<preference name="extensions.smartTemplate4.signature.insertDashes.html" type="bool" instantApply="true"/>
			<preference name="extensions.smartTemplate4.signature.insertDashes.plaintext" type="bool" instantApply="true"/>
			<preference name="extensions.smartTemplate4.signature.replaceLF.plaintext.br" type="bool" instantApply="true"/>
			<preference name="extensions.smartTemplate4.showStatusIcon" type="bool" instantApply="true" />
			<preference name="extensions.smartTemplate4.statusIconLabelMode" type="int" instantApply="true" />
			<preference name="extensions.smartTemplate4.breaksAtTop" type="int" instantApply="true"/>
			<preference name="extensions.smartTemplate4.font.size"  type="int" instantApply="true" />
			<preference name="extensions.smartTemplate4.firstLastSwap" type="bool" instantApply="true"/>
			<preference name="extensions.smartTemplate4.names.delimiter" type="string" instantApply="true"/>
			<preference name="extensions.smartTemplate4.cursor.insertSpace" type="bool" instantApply="true"/>
			<preference name="extensions.smartTemplate4.forceParagraph" type="bool" instantApply="true"/>
			<preference name="extensions.smartTemplate4.defaultCharset" type="string" instantApply="true"/>
			<preference name="extensions.smartTemplate4.mime.resolveAB" type="bool" instantApply="true"/>
			<preference name="extensions.smartTemplate4.mime.resolveAB.preferNick" type="bool" instantApply="true"/>
			<preference name="extensions.smartTemplate4.mime.resolveAB.displayName" type="bool" instantApply="true"/>
			<preference name="extensions.smartTemplate4.mime.resolveAB.removeEmail" type="bool" instantApply="true"/>
			<preference name="extensions.smartTemplate4.mime.resolveAB.CardBook" type="bool" instantApply="true"/>
			<preference name="extensions.smartTemplate4.mime.resolveAB.CardBook.fallback" type="bool" instantApply="true"/>
			<preference name="extensions.smartTemplate4.names.capitalize" type="bool" instantApply="true"/>
			<preference name="extensions.smartTemplate4.names.guessFromMail" type="bool" instantApply="true"/>
			<preference name="extensions.smartTemplate4.mime.defaultFormat" type="string" instantApply="true"/>
			<preference name="extensions.smartTemplate4.mail.suppressLink" type="bool" instantApply="true"/>
			<preference name="extensions.smartTemplate4.header.inject" type="bool" instantApply="true"/>      
			<preference name="extensions.smartTemplate4.silentUpdate" type="bool" instantApply="true"/>
      
      <preference name="extensions.smartTemplate4.BackgroundParser" type="bool" instantApply="true"/>
		</preferences>

		<tabbox id="rightPane" flex="1">

			<tabs class="actionTabs" id="advancedTabs">
				<tab id="fieldsTab"    label="__MSG_pref_variables.tab__" />
				<tab id="settingsTab"  label="__MSG_pref_global.tab__" />
				<tab id="advancedSettingsTab"  label="__MSG_pref_advanced.tab__" />
				<tab id="templatesTab" label="__MSG_pref_examples.tab__" 
				     tooltiptext="__MSG_pref_examples.tooltip__" />
				<tab id="aboutTab"  label="__MSG_about.cap__" /> 
				<tab id="SmartTemplate4-Pro" label="__MSG_license-tab__"  class="free" />
				<tab id="supportTab" label="__MSG_support.tab__" collapsed="true" /> 
			</tabs>
	
			<tabpanels flex="1" id="ST4-Panels">
				<tabpanel flex="1" id="variablesFrame">
					<iframe id="helpFrame"
					        src="chrome://smarttemplate4/content/help.xhtml"
					        type="chrome"
					        flex="1"
					        minheight="300"/>
				</tabpanel>
				
				<tabpanel flex="1" id="globalSettings">
					<vbox flex="1" id="globalSettingsVbox">
						<groupbox class="transparent">
							<hbox class="groupbox-title"><label class="header">__MSG_pref_groupMailContent__</label></hbox>
							<vbox>
								<hbox class="labeledBox">
									<label   class="textboxLabel"
											 value="__MSG_pref_breaksOnTop.label__" />
									<html:input
                        type="text" 
                        id="txtBreaks"
											  preference="extensions.smartTemplate4.breaksAtTop"
											  instantApply="true" />
								</hbox>
								<hbox class="labeledBox">
									<label class="textboxLabel"
											   value="__MSG_pref_defaultCharset.label__:" />
									<html:input
                        type="text" 
                        id="txtCharset"
											  preference="extensions.smartTemplate4.defaultCharset"
											  instantApply="true" 
											  tooltiptext="__MSG_pref_defaultCharset_tip__"/>
								</hbox>
							</vbox>
						</groupbox>

						<groupbox class="transparent" id="defaultTemplateBehaviorGrp">
							<hbox class="groupbox-title"><label class="header">__MSG_pref_defaultTemplateMethod_title__</label></hbox>
							<label>__MSG_pref_defaultTemplateMethod_about__</label>
							<label for="useAccountTemplate">
								<html:input type="radio" 
									name="defaultTemplateBehavior" id="useAccountTemplate" value="1" 
									onclick="SmartTemplate4.Settings.selectDefaultTemplates(this);"
								/>__MSG_pref_defaultTemplateMethod_select_account__</label>
							<label for="useLastTemplate">
								<html:input type="radio" 
									name="defaultTemplateBehavior" id="useLastTemplate" value="2" class="standardFeature"
									onclick="SmartTemplate4.Settings.selectDefaultTemplates(this);"
								/>__MSG_pref_defaultTemplateMethod_select_last__</label>
						</groupbox>

						
						<groupbox class="transparent">
							<hbox class="groupbox-title"><label class="header">__MSG_pref_groupSignatures__</label></hbox>
							<vbox>
								<checkbox id="chkRemoveSig"
											label="__MSG_pref_removeSig.label__"
											preference ="extensions.smartTemplate4.removeSigOnIdChangeAfterEdits"/>
								<checkbox id="chkSignature"
                      class="contextConfig"
											label="__MSG_pref_parseSignature__"
											tooltiptext="__MSG_pref_parseSignature_tip__"
											oncontextmenu="SmartTemplate4.Util.showAboutConfig(this, 'extensions.smartTemplate4.signature');return false;"
											preference="extensions.smartTemplate4.parseSignature"/>
								
								<checkbox label="__MSG_pref_sigReplaceBR.label__"
											preference="extensions.smartTemplate4.signature.replaceLF.plaintext.br"/>
									  
								<hbox>
									<checkbox label="__MSG_pref_addSigBreakHTML.label__"
												tooltiptext="__MSG_pref_addSigBreakHTML.tooltip__"
												preference="extensions.smartTemplate4.signature.insertDashes.html"/>
									<spacer flex="1" />
									<checkbox label="__MSG_pref_addSigBreakPlaintext.label__"
												tooltiptext="__MSG_pref_addSigBreakPlaintext.tooltip__"
												preference="extensions.smartTemplate4.signature.insertDashes.plaintext"/>
								</hbox>
							</vbox>									  
						</groupbox>
						
						<groupbox class="transparent">
							<hbox class="groupbox-title"><label class="header">__MSG_pref_groupAdvanced__</label></hbox>
							<vbox>
								<checkbox 
											label="__MSG_pref_cursorInsertSpace__"
											preference="extensions.smartTemplate4.cursor.insertSpace"/>
								<checkbox 
											preference="extensions.smartTemplate4.forceParagraph"
											label="__MSG_pref_forceParagraph__"
											tooltiptext="__MSG_pref_forceParagraph_tip__"/>
							</vbox>
						</groupbox>
					
						<groupbox class="transparent">
							<hbox class="groupbox-title"><label class="header">__MSG_pref_groupUI__</label></hbox>
							<vbox>
								<hbox>
									<checkbox id="chkStatusButton"
                        class="contextConfig"
												label="__MSG_pref_showStatusIcon.label__"
												preference="extensions.smartTemplate4.showStatusIcon"
												oncontextmenu="SmartTemplate4.Util.showAboutConfig(this, 'extensions.smartTemplate4.statusIconLabelMode'); SmartTemplate4.updateStatusBar(this.checked);"
												oncommand="SmartTemplate4.updateStatusBar(!this.checked);"/>
									<spacer flex="1" />
									<menulist id="iconType"
												label=""
												flex="5"
												preference="extensions.smartTemplate4.statusIconLabelMode"
												oncommand="SmartTemplate4.setStatusIconMode(this);">
										<menupopup>
											<menuitem label="__MSG_pref_StatusIcon.IconOnly__" value="0"/>
											<menuitem label="__MSG_pref_StatusIcon.IconText__" value="2"/>
											<menuitem label="__MSG_pref_StatusIcon.IconHoverText__" value="1"/>
										</menupopup>
									</menulist>
									
								</hbox>
								<spacer />
								<hbox class="labeledBox">
									<label  id="lblFontSettings"
											value="__MSG_pref_fontSettings.label__" />
									<toolbarbutton id="fontSmaller"
											oncommand="SmartTemplate4.Settings.fontSize(-1);" 
											label="" />
									<spacer id="fontButtonSpacer" />
									<toolbarbutton id="fontLarger"
											oncommand="SmartTemplate4.Settings.fontSize(+1);" 
											label="" />
									<spacer width="2px" />
									<html:input
                        type="text" 
                        id="txtFontSize"
											  preference="extensions.smartTemplate4.font.size"
											  disabled="true"/>
								</hbox>
							</vbox>
						</groupbox>
														 
					</vbox>
				</tabpanel>
					
				<tabpanel flex="1" id="advancedFrame">
					<vbox flex="1" id="advancedSettingsVbox">
						<groupbox class="transparent">
							<hbox class="groupbox-title"><label class="header">__MSG_pref_groupNameRules__</label></hbox>
							<vbox>
								<checkbox label="__MSG_capitalizeNames__"
										 preference="extensions.smartTemplate4.names.capitalize"/>
								<checkbox id="chkFirstLastSwap"
											label="__MSG_pref_nameSwap__"
											tooltiptext="__MSG_pref_nameSwap_tip__"
											preference="extensions.smartTemplate4.firstLastSwap"/>
								<checkbox id="chkGuessName"
											label="__MSG_guessNameFromMail__"
											preference="extensions.smartTemplate4.names.guessFromMail"/>
								<hbox  align="center">
									<label value="__MSG_defaultMimeFormat__"
												 control="default_address_format"/>
									<html:input
                        type="text" 
                        id="default_address_format"
                        size="50"
                        preference="extensions.smartTemplate4.mime.defaultFormat"
                        tooltiptext= "__MSG_defaultMimeFormat_tip__"/>
								</hbox>
								<hbox  align="center">
									<label value="__MSG_pref_addressDelimiter__"
												 control="txtNameDelimiter"/>
									<html:input
                        type="text" 
                        id="txtNameDelimiter"
                        style="width:2em;"
                        tooltiptext="__MSG_pref_addressDelimiter_tip__"
                        preference="extensions.smartTemplate4.names.delimiter"/>
								</hbox>
								<separator />		  
								<checkbox id="chkResolveAB"
											label="__MSG_resolveNamesFromAB__"
											preference="extensions.smartTemplate4.mime.resolveAB"
											tooltiptext="__MSG_resolveNamesFromAB_tip__"
											oncommand="SmartTemplate4.Settings.resolveAB_onClick(this);"/>
								<hbox>
									<spacer style="width:2em;"/>
									<vbox>
										<checkbox id="chkResolveABNick"
												 label="__MSG_resolveNamesFromABNick__"
												 preference="extensions.smartTemplate4.mime.resolveAB.preferNick"/>
										<checkbox id="chkResolveABDisplay"
												 label="__MSG_resolveNamesFromABDisplay__"
												 preference="extensions.smartTemplate4.mime.resolveAB.displayName"/>
										<checkbox id="chkResolveABRemoveMail"
												 label="__MSG_resolveABRemoveMail__"
												 tooltiptext="This will hide the mail address when using plain %cc% etc. if address book entry was found."
												 preference="extensions.smartTemplate4.mime.resolveAB.removeEmail"/>
										<checkbox id="chkResolveABCardBook" class="premiumFeature"
												label="__MSG_resolveNamesFromCardBook__"
												preference="extensions.smartTemplate4.mime.resolveAB.CardBook"/>
										<checkbox id="chkCardBookFallback" class="premiumFeature"
										    style="margin-left: 2em"
												label="__MSG_resolveNamesFromCardBook.fallback__"
												preference="extensions.smartTemplate4.mime.resolveAB.CardBook.fallback"/>
										<checkbox id="chkCardBookLowerCase" class="premiumFeature"
										    style="margin-left: 2em"
												label="__MSG_resolveNamesFromCardBook.forceLowerCase__"
												preference="extensions.smartTemplate4.mime.resolveAB.CardBook.forceLowerCase"/>

												
										
									</vbox>
								</hbox>
							</vbox>								
						</groupbox>
						
						<groupbox class="transparent">
							<hbox class="groupbox-title"><label class="header">__MSG_pref_groupMiscellaneus__</label></hbox>
							<vbox>
								<checkbox label="__MSG_suppressMailToLink__"
									preference="extensions.smartTemplate4.mail.suppressLink"/>
							  <checkbox label="__MSG_pref_header.inject__" class="premiumFeature"
									preference="extensions.smartTemplate4.header.inject"/>
		
							</vbox>
						</groupbox>

						<spacer flex="2" />
						<groupbox class="transparent">
							<hbox class="groupbox-title"><label class="header">__MSG_pref_groupTroubleShooting__</label></hbox>
							<hbox>
								<checkbox id="chkDebug"
										  label="__MSG_pref_debug_check__"
                      class="contextConfig"
										  tooltiptext="__MSG_pref_debug_tip__"
										  oncontextmenu="SmartTemplate4.Util.showAboutConfig(this, 'smartTemplate4.debug');return false;"
										  preference="extensions.smartTemplate4.debug"/>
								<spacer   flex="1"/>
								<checkbox id="chkHideExamples"
										  label="mx parser [issue 184]"
										  preference="extensions.smartTemplate4.BackgroundParser"
                      oncommand="alert('please reload SmartTemplates to effect this change!');"
										/>
								<checkbox id="chkHideExamples"
										  label="__MSG_pref_hideExamples__"
										  preference="extensions.smartTemplate4.hideExamples"
										  oncommand="SmartTemplate4.Settings.toggleExamples(this);"
										/>
							</hbox>
						</groupbox>
					</vbox>
				</tabpanel>

				<tabpanel flex="1" id="templatesFrame">
					<iframe id="templatesIFrame"
					        type="content"
					        flex="1"
					        minheight="300"
							seamless="seamless"/>
				</tabpanel>
				
				<tabpanel flex="1" id="aboutPanel">
					<vbox flex="1">
						<hbox class="aboutHeader" flex="1" align="center" > 
							<hbox id="SmartTemplate4AboutLogo" 
							      class="aboutLogo" 
										flex="1">
								<spacer flex="1"/>
								<label id="versionBox" onclick="if (SmartTemplate4.Util.showVersionHistory(true)) window.close(); event.stopPropagation();" />
							</hbox>
						</hbox>
						
						<hbox class="aboutWrapper" flex="1">
							<vbox id="aboutBox" class="aboutPersonnel" align="center" flex="1">
								<description>__MSG_creator.label__: Axel Grude</description>
								<description>__MSG_developer.label__: Axel Grude, Klaus Buecher/opto, Marky Mark DE</description>
								<description>__MSG_localized.label__ __MSG_translatorNickname.label__</description>
								<description>__MSG_contributor.label__:</description>
								<description>Aris - Style Support + Bug Report,</description>
								<description>tool8 - Development, Version 0.7.2 - 0.8.0,</description>
								<description>Peter Macej - Development Support</description>
								<description class="aboutContent">__MSG_about.label__</description>
							</vbox>
						</hbox>
						<hbox>
							<spacer flex="1" />
							<vbox class="buttonLinks">
							<!-- ######## Our Buttons "Supportpage - Homepage - Bugs/Feature Request" inside About Tab ######## -->
                <button oncommand="SmartTemplate4.Util.viewSplashScreen(); window.close();"
                        label="__MSG_showSplash__"
                        class="showSplash text-link" />              
								<button oncommand="SmartTemplate4.Util.showSupportPage(); setTimeout( function() {window.close();}, 200 );"
								        class="supportURL text-link"
								        label="__MSG_url.supportPage.label__" />
								<spacer flex="1"/>
								<button oncommand="SmartTemplate4.Util.showHomePage(); setTimeout( function() {window.close();}, 200 );"
								        class="homePageURL text-link"
								        label="__MSG_url.homePage.label__" />
								<spacer flex="1"/>
								<button oncommand="SmartTemplate4.Util.showBugsAndFeaturesPage(); setTimeout( function() {window.close();}, 200 );"
								        class="bugsURL text-link"
								        label="__MSG_url.bugsAndFeaturesPage.label__" />
							</vbox>
							<spacer flex="1"/>
						</hbox>
						<spacer flex="1" />
					</vbox>
				</tabpanel>
				
				<!-- Licensing tab -->
				<tabpanel orient="vertical" id="SmartTemplate4-Options-goPro">
					<description>__MSG_label.insertLicense__</description>
					<hbox id="licenseContainer" align="start">
						<html:textarea 
							id="txtLicenseKey"
							class="licenseKey"
							flex="2"
							multiline="true"
							rows="5"
							tooltiptext="__MSG_label.insertLicense.tooltip__"></html:textarea>
					</hbox>
					<hbox>
					  <spacer flex="1"/>
						<button id="btnPasteLicense"
										label="__MSG_button.pasteLicense__"
										oncommand="SmartTemplate4.Settings.pasteLicense();" />
						<button id="btnValidateLicense"
										label="__MSG_button.validateLicense__"
										oncommand="SmartTemplate4.Settings.validateNewKey(this);" />
					</hbox>
					<separator class="licenseSeparator" />
					<hbox id="validationDate" align="center">
						<label id="licenseDateLabel">__MSG_label.licenseValid__</label>
						<label id="licenseDate" value="-" />
					</hbox>
					<separator id="validationDateSpace" class="licenseSeparator" />
					<vbox id="validationResults">
						<description id="validationPassed" class="niceFont" collapsed="true">__MSG_licenseValidation.passed__</description>
						<description id="validationStandard" class="niceFont" collapsed="true">__MSG_licenseValidation.standard__</description>
						<description id="validationFailed" class="niceFont licenseError" collapsed="true">__MSG_licenseValidation.failed__</description>
						<description id="validationExpired" class="niceFont licenseWarning" collapsed="true">__MSG_licenseValidation.expired__</description>
						<description id="validationInvalidEmail" class="niceFont licenseWarning" collapsed="true">__MSG_licenseValidation.invalidMail__</description>
						<description id="validationEmailNoMatch" class="niceFont licenseWarning" collapsed="true">__MSG_licenseValidation.notMatchedMail__</description>
						<description id="validationInvalidAddon" class="niceFont licenseError" collapsed="true">__MSG_licenseValidation.invalidAddon__</description>
					</vbox>
					<separator  style="height:0.5em;" />
					<hbox class="btnLicenseContainer">
						<button id="btnLicense" 
										label="Buy License"
										oncommand="SmartTemplate4.Util.showLicenseDialog('licenseTab'); setTimeout( function() {window.close();}, 500 );" />
					</hbox>				
					<hbox>
						<groupbox id="premiumConfig" >
							<hbox class="groupbox-title"><label class="header">__MSG_premiumConfig__</label></hbox>
							<hbox>
								<label class="plain-link" 
											 tooltiptext="https://smarttemplates.quickfolders.org/"
											 onclick="SmartTemplate4.Util.showPremiumFeatures();">__MSG_label.premiumFeaturesSite__</label>
							</hbox>
						</groupbox>
					</hbox>				
					<hbox>
						<groupbox id="updates" >
							<hbox class="groupbox-title"><label class="header">__MSG_updates.title__</label></hbox>
              <hbox>
                <checkbox id="chkSilentUpdates"
                      label="__MSG_pref_silentUpdates__"
                      tooltiptext="__MSG_pref_silentUpdates_tip__"
                      preference="extensions.smartTemplate4.silentUpdate"
                      /> 
                      
              </hbox>
              <hbox>
                <button id="btnNewsSplash"
                        class="showSplash"
                        label="__MSG_updates.news__"
                        oncommand="SmartTemplate4.Util.viewSplashScreen(); window.close();"/>
                <button id="btnVersionInfo"
                        label="__MSG_updates.changeLog__"
                        oncommand="SmartTemplate4.Util.showVersionHistory(false); window.close();"/>
              </hbox>
              
              
						</groupbox>
            
					</hbox>
					<!-- will be populated / modified from bundle in code -->
				</tabpanel>
				
				<!-- Support tab -->
				<tabpanel flex="1" id="supportPanel">
				  <vbox flex="1" style="min-width:410px;">
						<groupbox flex="1" class="transparent">
							<hbox class="groupbox-title"><label class="header">__MSG_support.title__</label></hbox>
							<vbox flex="1">
								<hbox>
									<label class="textboxLabel" value="__MSG_support.type__" />
									<menulist id="supportType"
												label=""
												oncommand="SmartTemplate4.Settings.setSupportMode(this);">
										<menupopup>
											<menuitem label="__MSG_support.type.selectOne__" value=""/>
											<menuitem label="__MSG_support.type.license__" value="[SmartTemplates] [Licensing]"/>
											<menuitem label="__MSG_support.type.tech__" value="[SmartTemplates] [Technical]"/>
											<menuitem label="__MSG_support.type.html__" value="[SmartTemplates] [HTML]"/>
											<menuitem label="__MSG_support.type.other__" value="[SmartTemplates] [Support]"/>
										</menupopup>
									</menulist>
								</hbox>
								<hbox >
									<label class="textboxLabel" value="__MSG_support.subject__" />
									<html:input
                        type="text" 
                        id="txtSupportSubject" 
                        flex="1" 
                        maxlength="60"
                        />
								</hbox>
								<label>__MSG_support.mail.instructions__</label>
								<label>
									Emails in English / German are easier to answer as these are languages I speak fluently.
									The other ones will probably go through google translate.
								</label>
								<hbox>
									<spacer flex="1" />
									<button id="composeSupportMail"
													disabled="true"
													class="buttonIcon"
													label="__MSG_support.compose__"
													oncommand="SmartTemplate4.Settings.sendMail('axel.grude@gmail.com');"/>
									<spacer flex="1" />
								</hbox>
							</vbox>
						</groupbox>
						<groupbox class="transparent">
							<hbox class="groupbox-title"><label class="header">__MSG_support.links__</label></hbox>
							<hbox>
							  <spacer flex="1" />
								<vbox class="buttonLinks">
								<!-- ######## Our Buttons "Supportpage - Homepage - Bugs/Feature Request" inside About Tab ######## -->
									<button oncommand="SmartTemplate4.Util.showSupportPage(); setTimeout( function() {window.close();}, 200 );"
													class="supportURL text-link"
													label="__MSG_url.supportPage.label__" />
									<spacer flex="1"/>
									<button oncommand="SmartTemplate4.Util.showHomePage(); setTimeout( function() {window.close();}, 200 );"
													class="homePageURL text-link"
													label="__MSG_url.homePage.label__" />
									<spacer flex="1"/>
									<button oncommand="SmartTemplate4.Util.showBugsAndFeaturesPage(); setTimeout( function() {window.close();}, 200 );"
													class="bugsURL text-link"
													label="__MSG_url.bugsAndFeaturesPage.label__" />
								</vbox>
							  <spacer flex="1" />
							</hbox>
						</groupbox>
					</vbox>
				</tabpanel>

			</tabpanels>
		</tabbox>
	</vbox>
</hbox>
	    <spacer id="bottomOptions" />

	</prefpane>

<script type="application/javascript" src="chrome://smarttemplate4/content/smartTemplate-main.js"/>
<script type="application/javascript" src="chrome://smarttemplate4/content/smartTemplate-util.js"/>
<script type="application/javascript" src="chrome://smarttemplate4/content/smartTemplate-prefs.js"/>
<script type="application/javascript" src="chrome://smarttemplate4/content/settings.js"/>
<script type="application/javascript" src="chrome://smarttemplate4/content/smartTemplate-styles.js"/>
<script type="application/javascript" src="chrome://smarttemplate4/content/smartTemplate-fileIO.js"/>
<script type="application/javascript" src="chrome://smarttemplate4/content/smartTemplate-help.js"/>
<script type="application/javascript" src="chrome://smarttemplate4/content/smartTemplate-fileTemplates.js"/>

</dialog>
